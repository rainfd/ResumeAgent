# 面试助手需求文档

## 概述

面试助手是一个基于Python和Streamlit的Web应用程序，旨在帮助求职者优化简历以更好地匹配目标职位。该工具通过分析职位描述（JD）和用户的简历（PDF或文本格式），利用DeepSeek AI模型提供针对性的简历优化建议。工具采用现代化的Web界面，提供直观的操作体验，展示文本级别的差异对比，并提供修改理由，让用户能够根据建议自主编辑简历。

## 功能需求

### 1. 职位管理界面

**用户故事**: 作为一名求职者，我想要通过Web界面输入职位URL，以便系统能够自动获取并管理职位信息。

**验收标准**:
1.1. 系统SHALL提供URL输入框接受职位链接
1.2. 系统SHALL支持多个招聘网站的职位URL解析
1.3. 系统SHALL自动爬取并提取职位的关键信息，包括：
   - 职位名称
   - 公司名称
   - 职位描述
   - 任职要求
   - 技能要求
1.4. 系统SHALL将爬取的职位内容持久化存储
1.5. 系统SHALL在Web界面中显示职位列表和详情
1.6. 系统SHALL提供职位删除和预览功能
1.7. 系统SHALL在爬取过程中显示实时状态更新

### 2. 简历管理界面

**用户故事**: 作为一名求职者，我想要通过Web界面上传和管理我的简历，以便系统能够理解我的背景和经历。

**验收标准**:
2.1. 系统SHALL提供Streamlit文件上传组件支持PDF和文本格式
2.2. 系统SHALL解析并提取简历中的关键信息，包括：
   - 个人信息
   - 教育背景
   - 工作经历
   - 项目经验
   - 技能清单
2.3. 系统SHALL在Web界面中显示简历列表和预览
2.4. 系统SHALL提供简历删除功能
2.5. 系统SHALL为每个简历提供AI分析功能
2.6. 系统SHALL保持简历原始文本的完整性以供对比
2.7. 系统SHALL在解析失败时显示用户友好的错误信息

#### 2A. 简历列表显示改进

**用户故事**: 作为用户，我希望上传简历后能在简历列表中清楚地看到所有已上传的简历，以便我能管理我的简历文件。

**验收标准**:
2A.1. 系统SHALL在用户上传简历成功后自动刷新简历列表显示
2A.2. 系统SHALL在简历列表中显示所有已上传的简历文件
2A.3. 系统SHALL为每个简历条目显示基本信息：
   - 文件名（或自定义名称）
   - 文件类型
   - 上传时间
   - 文件大小
   - 解析状态
2A.4. 系统SHALL按上传时间倒序排列简历列表
2A.5. 系统SHALL在没有简历时显示友好的空状态提示
2A.6. 系统SHALL为简历列表提供搜索和筛选功能

#### 2B. 简历预览功能

**用户故事**: 作为用户，我希望能够快速预览简历内容，以便确认这是我需要的简历文件。

**验收标准**:
2B.1. 系统SHALL为每个简历条目提供明显的"预览"按钮
2B.2. 系统SHALL点击预览按钮后在当前页面显示简历的详细内容
2B.3. 系统SHALL在预览界面显示完整的简历信息：
   - 个人信息（姓名、联系方式等）
   - 技能清单
   - 工作经验
   - 项目经历
   - 教育背景
   - 原始文本内容
2B.4. 系统SHALL为预览界面提供关闭按钮，方便用户返回列表
2B.5. 系统SHALL确保预览界面响应式设计，适配不同屏幕尺寸
2B.6. 系统SHALL在预览界面提供快捷操作按钮（重命名、删除、分析）

#### 2C. 简历重命名功能

**用户故事**: 作为用户，我希望能够重命名我的简历文件，以便更好地组织和识别不同版本的简历。

**验收标准**:
2C.1. 系统SHALL为每个简历条目提供"重命名"功能入口
2C.2. 系统SHALL点击重命名后出现可编辑的文本输入框
2C.3. 系统SHALL验证重命名输入：
   - 不允许空白名称
   - 名称长度限制在1-100字符之间
   - 不允许特殊字符（如 / \ : * ? " < > |）
2C.4. 系统SHALL重命名成功后立即更新显示并提示用户操作成功
2C.5. 系统SHALL支持键盘操作（Enter确认，Escape取消）
2C.6. 系统SHALL确保重命名只修改显示名称，不影响原始文件内容
2C.7. 系统SHALL将重命名操作持久化存储到数据库

#### 2D. 用户体验优化

**用户故事**: 作为用户，我希望简历管理界面操作流畅，反馈及时，以便高效地管理我的简历。

**验收标准**:
2D.1. 系统SHALL为所有操作提供适当的加载状态指示
2D.2. 系统SHALL为操作成功或失败提供明确的用户反馈
2D.3. 系统SHALL确保界面布局清晰，功能按钮位置合理易找
2D.4. 系统SHALL支持批量操作（如批量删除、批量导出）
2D.5. 系统SHALL提供简历数据的导出功能（JSON、CSV格式）
2D.6. 系统SHALL确保操作的原子性和数据一致性
2D.7. 系统SHALL支持撤销最近一次删除操作（回收站功能）

### 3. AI分析与匹配

**用户故事**: 作为一名求职者，我想要获得AI驱动的简历与职位匹配度分析，以了解我的背景是否符合职位要求。

**验收标准**:
3.1. 系统SHALL集成DeepSeek API进行内容分析
3.2. 系统SHALL分析简历与JD的匹配程度，包括：
   - 技能匹配度
   - 经验相关性
   - 关键词覆盖率
3.3. 系统SHALL识别简历中缺失但JD要求的关键要素
3.4. 系统SHALL评估工作经历与职位要求的符合程度
3.5. 系统SHALL安全管理API密钥（通过环境变量或配置文件）
3.6. 系统SHALL在分析过程中显示实时进度和状态
3.7. 系统SHALL支持多种自定义AI分析Agent：
   - 提供内置分析Agent（通用、技术、管理、创意等类型）
   - 允许用户创建自定义分析Agent
   - 支持用户输入自定义Prompt来定义Agent行为
3.8. 系统SHALL提供Agent选择界面：
   - 在分析前允许用户选择使用的Agent
   - 显示每个Agent的名称、描述和适用场景
   - 支持Agent预览和使用历史记录

### 4. 简历优化建议

**用户故事**: 作为一名求职者，我想要获得具体的简历修改建议，以提高获得面试机会的概率。

**验收标准**:
4.1. 系统SHALL生成针对性的简历优化建议
4.2. 系统SHALL以文本差异（diff）的形式展示建议的修改
4.3. 系统SHALL为每个修改建议提供清晰的理由说明
4.4. 系统SHALL优先展示最重要的修改建议
4.5. 系统SHALL只关注内容优化，不涉及格式调整
4.6. 系统SHALL使用语法高亮显示差异部分
4.7. 系统SHALL支持基于不同Agent的优化建议：
   - 不同Agent产生不同角度的优化建议
   - 支持同时使用多个Agent进行对比分析
   - 显示各Agent建议的差异和重叠部分

### 4A. 自定义AI Agent管理

**用户故事**: 作为一名求职者，我想要创建和管理自定义的AI分析Agent，以便根据不同的分析需求获得个性化的简历优化建议。

**验收标准**:
4A.1. 系统SHALL提供Agent创建和编辑界面：
   - Agent名称输入（必填，最大50字符）
   - Agent描述输入（可选，最大200字符）
   - 分析类型标签选择（技术类、管理类、创意类等）
   - 自定义Prompt编辑器（必填，最大2000字符）
   - Prompt预览和测试功能
4A.2. 系统SHALL验证自定义Prompt的有效性：
   - 检查必要占位符的存在（如{job_description}、{resume_content}）
   - 验证Prompt长度和格式合规性
   - 提供Prompt编写指导和模板示例
4A.3. 系统SHALL提供Agent管理功能：
   - 查看所有Agent列表（内置+自定义）
   - 编辑和删除自定义Agent
   - 复制现有Agent创建新变体
   - Agent使用统计和效果评估
4A.4. 系统SHALL提供内置Agent模板：
   - 通用分析Agent（默认）
   - 技术岗位专用Agent
   - 管理岗位专用Agent  
   - 创意行业专用Agent
   - 销售岗位专用Agent
4A.5. 系统SHALL支持Agent效果对比：
   - 同一简历使用不同Agent的结果对比
   - Agent分析结果的差异高亮显示
   - 用户对Agent效果的评分和反馈

### 5. Streamlit Web界面设计

**用户故事**: 作为一名求职者，我想要通过直观的Web界面与系统交互，以便高效地管理和分析我的求职材料。

**验收标准**:
5.1. 系统SHALL提供基于Streamlit的响应式Web界面
5.2. 系统SHALL包含以下界面组件：
   - 侧边栏导航菜单
   - 职位管理页面（URL导入、列表显示、预览、删除）
   - 简历管理页面（文件上传、列表显示、预览、删除、AI分析）
   - AI Agent管理页面（Agent创建、编辑、删除、效果对比）
   - 设置页面（API配置、主题选择）
5.3. 系统SHALL使用Streamlit session state管理用户会话
5.4. 系统SHALL提供清晰的页面布局和导航
5.5. 系统SHALL使用一致的视觉风格和组件
5.6. 系统SHALL支持实时状态更新和错误提示

### 6. 配置管理界面

**用户故事**: 作为用户，我想要配置应用程序设置，以便根据我的偏好自定义应用行为。

**验收标准**:
6.1. 系统SHALL提供设置页面支持：
   - AI服务配置（API密钥、模型选择）
   - 主题选择（深色/浅色模式）
   - 数据导出功能
6.2. 系统SHALL验证配置输入并提供实时反馈
6.3. 系统SHALL将设置持久化保存
6.4. 系统SHALL显示当前配置状态

### 7. 数据持久化

**用户故事**: 作为一名求职者，我想要系统保存我的分析历史，以便追踪不同职位的申请进度和简历优化过程。

**验收标准**:
7.1. 系统SHALL使用现有的数据管理系统存储数据
7.2. 系统SHALL持久化保存：
   - 职位内容和元数据
   - 简历内容和版本
   - 分析结果和建议
   - 自定义AI Agent配置和Prompt
   - Agent使用历史和效果评分
   - 用户偏好设置
7.3. 系统SHALL使用Streamlit session state管理临时状态
7.4. 系统SHALL提供数据导出功能
7.5. 系统SHALL自动处理数据的持久化和加载

### 8. 错误处理与用户体验

**用户故事**: 作为一名求职者，我希望系统在出现问题时能够提供有用的反馈，以便我知道如何解决问题。

**验收标准**:
8.1. 系统SHALL优雅地处理所有预期的错误情况
8.2. 系统SHALL使用Streamlit的错误提示组件显示友好的错误信息
8.3. 系统SHALL在长时间操作时显示进度条和状态更新
8.4. 系统SHALL记录详细的日志以便问题排查
8.5. 系统SHALL提供操作反馈和成功提示
8.6. 系统SHALL使用Streamlit的toast和error组件提供用户反馈

## 非功能需求

### 9. 性能要求

9.1. 系统SHALL在合理时间内完成职位信息爬取
9.2. 系统SHALL在30秒内完成简历解析和展示
9.3. 系统SHALL在合理时间内完成AI分析
9.4. 系统SHALL保持Web界面响应流畅
9.5. 系统SHALL优化大文件的处理和显示性能

### 10. 安全要求

10.1. 系统SHALL安全存储敏感信息（如API密钥）
10.2. 系统SHALL不在日志中记录个人隐私信息
10.3. 系统SHALL仅在本地存储用户数据
10.4. 系统SHALL提供安全的文件上传和处理机制

### 11. 可用性要求

11.1. 系统SHALL提供直观的Web界面布局
11.2. 系统SHALL记住用户的界面偏好设置
11.3. 系统SHALL提供清晰的操作反馈和状态指示
11.4. 系统SHALL支持现代Web浏览器
11.5. 系统SHALL提供响应式设计适配不同屏幕尺寸
